<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Transposition Cipher</title>
<style>
body { font-family: Arial; background: #a29bfe; display:flex; justify-content:center; align-items:center; height:100vh;}
.container { background:white; padding:30px; border-radius:15px; box-shadow:0 8px 20px rgba(0,0,0,0.2); width:400px; text-align:center;}
input, textarea { width:100%; padding:10px; margin:10px 0; border-radius:8px; border:1px solid #ccc; }
button { padding:10px 20px; border:none; border-radius:8px; background-color:#00b894; color:white; cursor:pointer; margin:5px;}
button:hover { background-color:#019875; }
h2 { margin-bottom:20px;}
</style>
</head>
<body>
<div class="container">
<h2>Transposition Cipher</h2>
<textarea id="text" rows="3" placeholder="Nhập văn bản"></textarea>
<input type="text" id="key" placeholder="Khóa (vd:3,1,2)">
<br>
<button onclick="encrypt()">Mã hoá</button>
<button onclick="decrypt()">Giải mã</button>
<h3>Kết quả:</h3>
<textarea id="result" rows="3" readonly></textarea>
</div>

<script>
function parseKey(str){
    return str.split(',').map(Number);
}
function transposeEncrypt(text,key){
    let n = key.length;
    let result="";
    for(let i=0;i<text.length;i+=n){
        for(let k of key){
            if(i+k-1<text.length) result+=text[i+k-1];
        }
    }
    return result;
}
function transposeDecrypt(text,key){
    let n = key.length;
    let result = text.split('');
    for(let i=0;i<text.length;i+=n){
        let block = text.substr(i,n);
        for(let j=0;j<n && i+j<text.length;j++){
            result[i+key[j]-1]=block[j];
        }
    }
    return result.join('');
}
function encrypt(){
    let text=document.getElementById('text').value;
    let key=parseKey(document.getElementById('key').value);
    document.getElementById('result').value=transposeEncrypt(text,key);
}
function decrypt(){
    let text=document.getElementById('text').value;
    let key=parseKey(document.getElementById('key').value);
    document.getElementById('result').value=transposeDecrypt(text,key);
}
</script>
</body>
</html>
